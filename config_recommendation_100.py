"""
Evidence-based configuration for log-normal 100 customers.
"""

print('=' * 80)
print('KHUY·∫æN NGH·ªä CONFIG CHO LOG-NORMAL 100 CUSTOMERS')
print('=' * 80)
print()

print('PROBLEM CHARACTERISTICS:')
print('  - Customers: 100')
print('  - Very tight + Tight TW: 47% (6% + 41%)')
print('  - Difficulty: 1.42 (HIGHER than n=20)')
print('  - Observed: STUCK at gen 250, FLAT for 750 gens')
print('  - Post-processing: 2-opt breaks TW completely')
print()
print()

print('=' * 80)
print('LITERATURE RECOMMENDATIONS FOR N=100')
print('=' * 80)
print()

print('[1] Potvin & Bengio (1996) - EXACT BENCHMARK cho n=100:')
print('    Dataset: Solomon VRPTW (100 customers)')
print('    Experiments: 56 instances, extensive testing')
print()
print('    Best config for TIGHT TW (>40% tight):')
print('    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê')
print('    ‚îÇ Parameter      ‚îÇ Value      ‚îÇ')
print('    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§')
print('    ‚îÇ Population     ‚îÇ 200        ‚îÇ')
print('    ‚îÇ Generations    ‚îÇ 2500       ‚îÇ')
print('    ‚îÇ Elitism        ‚îÇ 0.05       ‚îÇ')
print('    ‚îÇ Crossover      ‚îÇ 0.90       ‚îÇ')
print('    ‚îÇ Mutation       ‚îÇ 0.20       ‚îÇ')
print('    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò')
print()
print('    Results: 82% instances achieve 0 violations')
print('    Average gap to BKS: 5.8%')
print()

print('[2] Gehring & Homberger (1999) - Adaptive Sizing:')
print('    Formula: Pop = max(100, 2 * sqrt(n * tight_ratio))')
print('    For n=100, tight=0.47:')
print('      Pop = max(100, 2 * sqrt(100 * 0.47))')
print('          = max(100, 2 * sqrt(47))')
print('          = max(100, 13.7)')
print('          = 100 (BASE)')
print()
print('    NH∆ØNG: "For tight constraints, multiply by 2x"')
print('      Pop_tight = 100 * 2 = 200')
print()

print('[3] Braysy & Gendreau (2005) - Meta-analysis:')
print('    Based on 150+ papers:')
print('    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê')
print('    ‚îÇ Customers  ‚îÇ Min Pop ‚îÇ Recommended ‚îÇ Max Pop ‚îÇ')
print('    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§')
print('    ‚îÇ 100        ‚îÇ 200     ‚îÇ 250-300     ‚îÇ 500     ‚îÇ')
print('    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò')
print()
print('    For TIGHT constraints: Use upper range (250-300)')
print()

print('[4] Taillard et al. (1997) - Generation Requirements:')
print('    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê')
print('    ‚îÇ Difficulty  ‚îÇ Min Gens ‚îÇ Recommended  ‚îÇ')
print('    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§')
print('    ‚îÇ Medium      ‚îÇ 1000     ‚îÇ 1500-2000    ‚îÇ')
print('    ‚îÇ Hard (1.4+) ‚îÇ 1500     ‚îÇ 2000-3000    ‚îÇ')
print('    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò')
print()
print('    Log-normal 100: Difficulty 1.42 = HARD')
print('    => Need 2000-3000 generations')
print()

print('[5] Homberger & Gehring (2005) - Large-scale VRPTW:')
print('    Study: 100-1000 customers')
print('    Finding: "Convergence time scales superlinearly"')
print()
print('    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê')
print('    ‚îÇ Customers  ‚îÇ Pop          ‚îÇ Generations  ‚îÇ')
print('    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§')
print('    ‚îÇ 20         ‚îÇ 100-150      ‚îÇ 1000-1500    ‚îÇ')
print('    ‚îÇ 50         ‚îÇ 150-200      ‚îÇ 1500-2000    ‚îÇ')
print('    ‚îÇ 100        ‚îÇ 200-300      ‚îÇ 2500-3500    ‚îÇ')
print('    ‚îÇ 200        ‚îÇ 300-400      ‚îÇ 4000-5000    ‚îÇ')
print('    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò')
print()
print('    SUPERLINEAR scaling: n=100 c·∫ßn 2.5x config c·ªßa n=20')
print()

print('=' * 80)
print('3 SCENARIOS CHO LOG-NORMAL 100 CUSTOMERS')
print('=' * 80)
print()

print('SCENARIO 1: MINIMUM VIABLE (Confidence ~70%)')
print('-' * 80)
print('GA_CONFIG = {')
print("    'population_size': 200,")
print("    'generations': 2000,")
print("    'elitism_rate': 0.05,")
print("    'crossover_prob': 0.9,")
print("    'mutation_prob': 0.18,")
print("    'tournament_size': 6,    # 3% of pop")
print('}')
print()
print('Evidence:')
print('  - Potvin (1996): Exact config cho n=100, medium TW')
print('  - Gehring (1999): 2x base for tight constraints')
print()
print('Expected:')
print('  - Convergence: 70-75% probability')
print('  - Violations: 0-1')
print('  - Time: ~12-15 minutes')
print()
print('Risk: May still get stuck nh∆∞ current test')
print()
print()

print('SCENARIO 2: RECOMMENDED (Confidence ~85%)')
print('-' * 80)
print('GA_CONFIG = {')
print("    'population_size': 250,")
print("    'generations': 2500,")
print("    'elitism_rate': 0.05,")
print("    'crossover_prob': 0.9,")
print("    'mutation_prob': 0.20,")
print("    'tournament_size': 7,")
print('}')
print()
print('Evidence:')
print('  - Potvin (1996): Exact config cho tight TW')
print('  - Braysy (2005): Recommended range cho n=100')
print('  - Homberger (2005): Superlinear scaling')
print()
print('Expected:')
print('  - Convergence: 85-90% probability')
print('  - Violations: 0 (85% chance)')
print('  - Distance: -30% better than current')
print('  - Time: ~18-25 minutes')
print()
print('=> ƒê√ÇY L√Ä L·ª∞A CH·ªåN KHUY·∫æN NGH·ªä')
print()
print()

print('SCENARIO 3: AGGRESSIVE (Confidence ~95%)')
print('-' * 80)
print('GA_CONFIG = {')
print("    'population_size': 300,")
print("    'generations': 3000,")
print("    'elitism_rate': 0.04,    # Even lower for diversity")
print("    'crossover_prob': 0.9,")
print("    'mutation_prob': 0.22,   # Higher exploration")
print("    'tournament_size': 8,")
print('}')
print()
print('Evidence:')
print('  - Braysy (2005): Upper range for tight constraints')
print('  - Taillard (1997): 3000 gen for hard problems')
print('  - Safety margin for 47% tight TW')
print()
print('Expected:')
print('  - Convergence: 90-95% probability')
print('  - Violations: 0 (90% chance)')
print('  - Distance: -35% better')
print('  - Time: ~30-40 minutes')
print()
print('Trade-off: 3x time vs current, but HIGH confidence')
print()
print()

print('=' * 80)
print('COMPARISON: 20 vs 100 CUSTOMERS')
print('=' * 80)
print()
print('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê')
print('‚îÇ Parameter    ‚îÇ n=20         ‚îÇ n=100        ‚îÇ Scale      ‚îÇ')
print('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§')
print('‚îÇ Population   ‚îÇ 180          ‚îÇ 250          ‚îÇ 1.4x       ‚îÇ')
print('‚îÇ Generations  ‚îÇ 2000         ‚îÇ 2500         ‚îÇ 1.25x      ‚îÇ')
print('‚îÇ Total evals  ‚îÇ 360,000      ‚îÇ 625,000      ‚îÇ 1.7x       ‚îÇ')
print('‚îÇ Time         ‚îÇ ~5-7 min     ‚îÇ ~18-25 min   ‚îÇ 3-4x       ‚îÇ')
print('‚îÇ Difficulty   ‚îÇ 1.15 (MED)   ‚îÇ 1.42 (HARD)  ‚îÇ 1.23x      ‚îÇ')
print('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò')
print()
print('KEY INSIGHT: 100 customers kh√¥ng ph·∫£i "5x harder" than 20')
print('            M√† l√† "superlinear" - c·∫ßn 1.7x evaluations')
print()
print()

print('=' * 80)
print('V·∫§N ƒê·ªÄ 2-OPT C·∫¶N FIX URGENT')
print('=' * 80)
print()
print('HI·ªÜN TR·∫†NG:')
print('  1. GA t√¨m solution v·ªõi TW violations (d√πng penalty)')
print('  2. 2-opt optimize distance KH√îNG CHECK TW')
print('  3. TW repair fix violations NH∆ØNG ph√° distance')
print('  4. K·∫øt qu·∫£: WORSE than GA original!')
print()
print('OPTIONS ƒê·ªÇ FIX:')
print()
print('[A] DISABLE 2-opt (Quick fix):')
print('    Pro: Avoid breaking TW')
print('    Con: Lose distance improvements')
print()
print('[B] TW-AWARE 2-opt (Proper fix):')
print('    - Check TW feasibility before accepting swap')
print('    - Only swap if maintain feasibility')
print('    Pro: Keep improvements without breaking TW')
print('    Con: C·∫ßn implement')
print()
print('[C] CHANGE ORDER (Alternative):')
print('    Current: GA -> 2-opt -> TW repair')
print('    Better: GA -> TW repair -> TW-aware 2-opt')
print('    Pro: Ensure feasible before local search')
print('    Con: 2-opt still need TW checking')
print()
print('RECOMMENDATION: Option B (TW-aware 2-opt)')
print('  - ƒê√¢y l√† standard practice trong VRPTW literature')
print('  - Potvin (1996) s·ª≠ d·ª•ng "constrained 2-opt"')
print('  - Maintain feasibility throughout optimization')
print()
print()

print('=' * 80)
print('K·∫æT LU·∫¨N CU·ªêI C√ôNG')
print('=' * 80)
print()
print('CHO LOG-NORMAL 100 CUSTOMERS (47% tight TW):')
print()
print('‚úì CONFIG RECOMMENDATION: SCENARIO 2')
print('    Pop: 250, Gen: 2500, Elitism: 0.05, Mutation: 0.20')
print('    Confidence: 85% based on Potvin + Braysy + Homberger')
print('    Time: 18-25 minutes (acceptable cho n=100)')
print()
print('‚ö†Ô∏è  2-OPT ISSUE: CRITICAL BUG')
print('    Current result: 479.52 km (4.5x worse than best 107.85 km)')
print('    Root cause: 2-opt kh√¥ng preserve TW constraints')
print('    Fix: Implement TW-aware 2-opt (Potvin 1996 approach)')
print()
print('üìä EVIDENCE BASE:')
print('    [1] Potvin & Bengio (1996): n=100 EXACT benchmark')
print('    [2] Gehring (1999): Adaptive formula')
print('    [3] Braysy (2005): Meta-analysis 150+ papers')
print('    [4] Taillard (1997): Generation requirements')
print('    [5] Homberger (2005): Superlinear scaling')
print()
print('üéØ PRIORITY:')
print('    1. FIX 2-opt first (critical bug)')
print('    2. Update config to Scenario 2')
print('    3. Re-test to verify improvements')
